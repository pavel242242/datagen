{
"version": "1.0",
"metadata": { "name": "BankSchema" },
"timeframe": { "start": "2024-01-01T00:00:00Z", "end": "2025-10-08T23:59:59Z", "freq": "H" },
"nodes": [
{
"id": "branch",
"kind": "entity",
"pk": "branch_id",
"columns": [
{ "name": "branch_id", "type": "int", "nullable": false, "generator": { "sequence": { "start": 1, "step": 1 } } },
{ "name": "name", "type": "string", "nullable": false, "generator": { "faker": { "method": "company" } } },
{ "name": "region", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["Northeast","Midwest","South","West","Central Europe","UK/Ireland"], "weights_kind": "uniform" } } },
{ "name": "country", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["US","UK","DE","FR","CZ"], "weights_kind": "uniform" } } },
{ "name": "address", "type": "string", "nullable": false, "generator": { "faker": { "method": "address", "locale_from": "country" } } },
{ "name": "opened_on", "type": "date", "nullable": false, "generator": { "datetime_series": { "within": { "start": "1990-01-01T00:00:00Z", "end": "2024-01-01T00:00:00Z" }, "freq": "D" } } }
]
},
{
"id": "employee",
"kind": "entity",
"pk": "employee_id",
"columns": [
{ "name": "employee_id", "type": "int", "nullable": false, "generator": { "sequence": { "start": 10001, "step": 1 } } },
{ "name": "branch_id", "type": "int", "nullable": false, "generator": { "lookup": { "from": "branch.branch_id" } } },
{ "name": "full_name", "type": "string", "nullable": false, "generator": { "faker": { "method": "name" } } },
{ "name": "title", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["Teller","Personal Banker","Loan Officer","Customer Success Rep","Branch Manager","Regional Manager","Director"], "weights": [0.25,0.2,0.15,0.15,0.15,0.08,0.02] } } },
{ "name": "manager_id", "type": "int", "nullable": true, "generator": { "lookup": { "from": "employee.employee_id" } } },
{ "name": "hire_date", "type": "date", "nullable": false, "generator": { "datetime_series": { "within": { "start": "2010-01-01T00:00:00Z", "end": "2025-10-08T00:00:00Z" }, "freq": "D" } } },
{ "name": "email", "type": "string", "nullable": false, "generator": { "faker": { "method": "email" } } }
]
},
{
"id": "customer",
"kind": "entity",
"pk": "customer_id",
"columns": [
{ "name": "customer_id", "type": "int", "nullable": false, "generator": { "sequence": { "start": 500001, "step": 1 } } },
{ "name": "home_branch_id", "type": "int", "nullable": false, "generator": { "lookup": { "from": "branch.branch_id" } } },
{ "name": "full_name", "type": "string", "nullable": false, "generator": { "faker": { "method": "name" } } },
{ "name": "email", "type": "string", "nullable": false, "generator": { "faker": { "method": "email" } } },
{ "name": "phone", "type": "string", "nullable": false, "generator": { "faker": { "method": "phone_number" } } },
{ "name": "country", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["US","UK","DE","FR","CZ"], "weights_kind": "uniform" } } },
{ "name": "address", "type": "string", "nullable": false, "generator": { "faker": { "method": "address", "locale_from": "country" } } },
{ "name": "birth_date", "type": "date", "nullable": false, "generator": { "datetime_series": { "within": { "start": "1940-01-01T00:00:00Z", "end": "2005-12-31T00:00:00Z" }, "freq": "D" } } },
{ "name": "created_at", "type": "datetime", "nullable": false, "generator": { "datetime_series": { "within": { "start": "2018-01-01T00:00:00Z", "end": "2025-10-08T23:59:59Z" }, "freq": "H" } }, "modifiers": [ { "transform": "seasonality", "args": { "dimension": "dow", "weights": [0.95,1.0,1.05,1.1,1.2,0.9,0.8] } } ] }
]
},
{
"id": "account",
"kind": "entity",
"pk": "account_id",
"columns": [
{ "name": "account_id", "type": "int", "nullable": false, "generator": { "sequence": { "start": 9000001, "step": 1 } } },
{ "name": "customer_id", "type": "int", "nullable": false, "generator": { "lookup": { "from": "customer.customer_id" } } },
{ "name": "branch_id", "type": "int", "nullable": false, "generator": { "lookup": { "from": "branch.branch_id" } } },
{ "name": "account_type", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["Checking","Savings","Money Market","CD","Credit Card"], "weights": [0.45,0.35,0.08,0.06,0.06] } } },
{ "name": "status", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["Active","Dormant","Closed"], "weights": [0.86,0.1,0.04] } } },
{ "name": "opened_on", "type": "date", "nullable": false, "generator": { "datetime_series": { "within": { "start": "2018-01-01T00:00:00Z", "end": "2025-10-08T00:00:00Z" }, "freq": "D" } } },
{ "name": "balance", "type": "float", "nullable": false, "generator": { "distribution": { "type": "lognormal", "params": { "mean": 8.0, "sigma": 1.0 }, "clamp": [-1000, 100000] } } }
]
},
{
"id": "loan",
"kind": "entity",
"pk": "loan_id",
"columns": [
{ "name": "loan_id", "type": "int", "nullable": false, "generator": { "sequence": { "start": 30000001, "step": 1 } } },
{ "name": "customer_id", "type": "int", "nullable": false, "generator": { "lookup": { "from": "customer.customer_id" } } },
{ "name": "branch_id", "type": "int", "nullable": false, "generator": { "lookup": { "from": "branch.branch_id" } } },
{ "name": "loan_type", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["Mortgage","Auto","Personal","Credit Line","Small Business"], "weights": [0.5,0.18,0.15,0.1,0.07] } } },
{ "name": "amount", "type": "float", "nullable": false, "generator": { "distribution": { "type": "lognormal", "params": { "mean": 11.0, "sigma": 0.9 }, "clamp": [500, 500000] } } },
{ "name": "interest_rate_apr", "type": "float", "nullable": false, "generator": { "distribution": { "type": "normal", "params": { "mean": 6.0, "std": 3.0 }, "clamp": [0.5, 25.0] } } },
{ "name": "term_months", "type": "int", "nullable": false, "generator": { "distribution": { "type": "uniform", "params": { "low": 12, "high": 360 }, "clamp": [12, 360] } } },
{ "name": "start_date", "type": "date", "nullable": false, "generator": { "datetime_series": { "within": { "start": "2018-01-01T00:00:00Z", "end": "2025-10-08T00:00:00Z" }, "freq": "D" } } },
{ "name": "end_date", "type": "date", "nullable": false, "generator": { "datetime_series": { "within": { "start": "2019-01-01T00:00:00Z", "end": "2055-12-31T00:00:00Z" }, "freq": "D" } } }
]
},
{
"id": "promotion",
"kind": "entity",
"pk": "promotion_id",
"columns": [
{ "name": "promotion_id", "type": "int", "nullable": false, "generator": { "sequence": { "start": 700001, "step": 1 } } },
{ "name": "name", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["Rate Drop Splash","Zero-Fee Checking","Auto Loan Weekend","Mortgage Refi Blitz","SMB Growth Offer"], "weights_kind": "uniform" } } },
{ "name": "channel_primary", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["Email","SMS","In-App","Web","Branch"], "weights": [0.4,0.25,0.15,0.1,0.1] } } },
{ "name": "product_focus", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["Checking","Savings","Credit Card","Loan"], "weights": [0.35,0.25,0.2,0.2] } } },
{ "name": "start_at", "type": "datetime", "nullable": false, "generator": { "datetime_series": { "within": "timeframe", "freq": "D" } } },
{ "name": "end_at", "type": "datetime", "nullable": false, "generator": { "datetime_series": { "within": { "start": "2024-02-01T00:00:00Z", "end": "2025-12-31T23:59:59Z" }, "freq": "D" } } },
{ "name": "discount_multiplier", "type": "float", "nullable": false, "generator": { "distribution": { "type": "uniform", "params": { "low": 0.9, "high": 1.0 }, "clamp": [0.85, 1.0] } } }
]
},
{
"id": "communication",
"kind": "fact",
"parents": ["customer"],
"pk": "comm_id",
"fanout": { "distribution": "poisson", "lambda": 20, "min": 0, "max": 200 },
"columns": [
{ "name": "comm_id", "type": "int", "nullable": false, "generator": { "sequence": { "start": 80000001, "step": 1 } } },
{ "name": "customer_id", "type": "int", "nullable": false, "generator": { "lookup": { "from": "customer.customer_id" } } },
{ "name": "employee_id", "type": "int", "nullable": true, "generator": { "lookup": { "from": "employee.employee_id" } } },
{ "name": "promotion_id", "type": "int", "nullable": true, "generator": { "lookup": { "from": "promotion.promotion_id" } } },
{ "name": "channel", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["Email","SMS","Chat"], "weights": [0.6,0.25,0.15] } } },
{ "name": "direction", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["Outbound","Inbound"], "weights": [0.7,0.3] } } },
{ "name": "sent_at", "type": "datetime", "nullable": false, "generator": { "datetime_series": { "within": "timeframe", "freq": "H", "pattern": { "dimension": "hour", "weights": [0.2,0.15,0.12,0.1,0.1,0.15,0.5,1.2,1.6,1.8,1.9,2.0,1.8,1.6,1.5,1.4,1.5,1.8,1.9,1.6,1.2,0.8,0.5,0.3] } } }, "modifiers": [ { "transform": "seasonality", "args": { "dimension": "dow", "weights": [0.8,0.95,1.0,1.1,1.2,1.05,0.9] } } ] },
{ "name": "message_length_chars", "type": "int", "nullable": false, "generator": { "distribution": { "type": "normal", "params": { "mean": 280, "std": 150 }, "clamp": [5, 2000] } } },
{ "name": "resolved", "type": "bool", "nullable": false, "generator": { "choice": { "choices": [true, false], "weights": [0.85, 0.15] } } }
],
"modifiers": [
{ "transform": "effect", "args": { "effect_table": "promotion", "on": { "promotion_id": "promotion_id" }, "window": { "start_col": "start_at", "end_col": "end_at" }, "map": { "field": "discount_multiplier", "op": "mul", "default": 1.0 } } }
]
},
{
"id": "account_transaction",
"kind": "fact",
"parents": ["account"],
"pk": "txn_id",
"fanout": { "distribution": "poisson", "lambda": 120, "min": 0, "max": 2000 },
"columns": [
{ "name": "txn_id", "type": "int", "nullable": false, "generator": { "sequence": { "start": 100000001, "step": 1 } } },
{ "name": "account_id", "type": "int", "nullable": false, "generator": { "lookup": { "from": "account.account_id" } } },
{ "name": "txn_time", "type": "datetime", "nullable": false, "generator": { "datetime_series": { "within": "timeframe", "freq": "H" } }, "modifiers": [ { "transform": "seasonality", "args": { "dimension": "hour", "weights": [0.3,0.2,0.2,0.2,0.25,0.4,0.8,1.4,1.8,2.2,2.1,2.0,1.8,1.7,1.8,2.0,2.1,2.0,1.9,1.7,1.3,0.9,0.6,0.4] } } , { "transform": "seasonality", "args": { "dimension": "dow", "weights": [0.9,0.95,1.0,1.05,1.2,1.1,0.8] } } ] },
{ "name": "txn_type", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["POS Purchase","ATM Withdrawal","Transfer","Deposit","Fee","Interest"], "weights": [0.55,0.15,0.15,0.1,0.03,0.02] } } },
{ "name": "direction", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["Debit","Credit"], "weights": [0.7,0.3] } } },
{ "name": "amount", "type": "float", "nullable": false, "generator": { "distribution": { "type": "normal", "params": { "mean": 65.0, "std": 120.0 }, "clamp": [-5000, 5000] } } },
{ "name": "merchant_category", "type": "string", "nullable": true, "generator": { "choice": { "choices": ["Groceries","Restaurants","Fuel","Utilities","Online","Travel","Healthcare","Other"], "weights_kind": "head_tail@{0.6,1.5}" } } }
]
},
{
"id": "customer_account",
"kind": "fact",
"parents": ["customer","account"],
"pk": "customer_account_id",
"fanout": { "distribution": "poisson", "lambda": 2.0, "min": 1, "max": 5 },
"columns": [
{ "name": "customer_account_id", "type": "int", "nullable": false, "generator": { "sequence": { "start": 60000001, "step": 1 } } },
{ "name": "customer_id", "type": "int", "nullable": false, "generator": { "lookup": { "from": "customer.customer_id" } } },
{ "name": "account_id", "type": "int", "nullable": false, "generator": { "lookup": { "from": "account.account_id" } } },
{ "name": "primary_owner", "type": "bool", "nullable": false, "generator": { "choice": { "choices": [true,false], "weights": [0.85,0.15] } } }
]
},
{
"id": "customer_loan",
"kind": "fact",
"parents": ["customer","loan"],
"pk": "customer_loan_id",
"fanout": { "distribution": "poisson", "lambda": 0.35, "min": 0, "max": 3 },
"columns": [
{ "name": "customer_loan_id", "type": "int", "nullable": false, "generator": { "sequence": { "start": 65000001, "step": 1 } } },
{ "name": "customer_id", "type": "int", "nullable": false, "generator": { "lookup": { "from": "customer.customer_id" } } },
{ "name": "loan_id", "type": "int", "nullable": false, "generator": { "lookup": { "from": "loan.loan_id" } } },
{ "name": "role", "type": "string", "nullable": false, "generator": { "choice": { "choices": ["Primary","Co-signer"], "weights": [0.9,0.1] } } }
]
}
],
"constraints": {
"unique": [
"branch.branch_id",
"employee.employee_id",
"customer.customer_id",
"account.account_id",
"loan.loan_id",
"promotion.promotion_id",
"communication.comm_id",
"account_transaction.txn_id",
"customer_account.customer_account_id",
"customer_loan.customer_loan_id"
],
"foreign_keys": [
{ "from": "employee.branch_id", "to": "branch.branch_id" },
{ "from": "employee.manager_id", "to": "employee.employee_id" },
{ "from": "customer.home_branch_id", "to": "branch.branch_id" },
{ "from": "account.customer_id", "to": "customer.customer_id" },
{ "from": "account.branch_id", "to": "branch.branch_id" },
{ "from": "loan.customer_id", "to": "customer.customer_id" },
{ "from": "loan.branch_id", "to": "branch.branch_id" },
{ "from": "communication.customer_id", "to": "customer.customer_id" },
{ "from": "communication.employee_id", "to": "employee.employee_id" },
{ "from": "communication.promotion_id", "to": "promotion.promotion_id" },
{ "from": "account_transaction.account_id", "to": "account.account_id" },
{ "from": "customer_account.customer_id", "to": "customer.customer_id" },
{ "from": "customer_account.account_id", "to": "account.account_id" },
{ "from": "customer_loan.customer_id", "to": "customer.customer_id" },
{ "from": "customer_loan.loan_id", "to": "loan.loan_id" }
],
"ranges": [
{ "attr": "account.balance", "min": -1000, "max": 100000 },
{ "attr": "loan.amount", "min": 500, "max": 500000 },
{ "attr": "loan.interest_rate_apr", "min": 0.5, "max": 25.0 },
{ "attr": "loan.term_months", "min": 12, "max": 360 },
{ "attr": "communication.message_length_chars", "min": 5, "max": 2000 },
{ "attr": "account_transaction.amount", "min": -5000, "max": 5000 }
],
"inequalities": [
{ "left": "promotion.start_at", "op": "<", "right": "promotion.end_at" },
{ "left": "loan.start_date", "op": "<", "right": "loan.end_date" }
],
"enum": [
{ "attr": "account.status", "values": ["Active","Dormant","Closed"] },
{ "attr": "communication.channel", "values": ["Email","SMS","Chat"] },
{ "attr": "communication.direction", "values": ["Outbound","Inbound"] },
{ "attr": "account_transaction.direction", "values": ["Debit","Credit"] },
{ "attr": "loan.loan_type", "values": ["Mortgage","Auto","Personal","Credit Line","Small Business"] },
{ "attr": "account.account_type", "values": ["Checking","Savings","Money Market","CD","Credit Card"] }
]
},
"targets": {
"weekend_share": { "table": "account_transaction", "timestamp": "txn_time", "min": 0.25, "max": 0.45 },
"mean_in_range": { "table": "account_transaction", "column": "amount", "min": 30.0, "max": 100.0 },
"composite_effect": {
"table": "communication",
"metric": "volume",
"influences": [
{ "kind": "seasonality", "dimension": "hour", "weights": [0.2,0.15,0.12,0.1,0.1,0.15,0.5,1.2,1.6,1.8,1.9,2.0,1.8,1.6,1.5,1.4,1.5,1.8,1.9,1.6,1.2,0.8,0.5,0.3] },
{ "kind": "seasonality", "dimension": "dow", "weights": [0.8,0.95,1.0,1.1,1.2,1.05,0.9] }
],
"tolerance": { "mae": 0.1, "mape": 0.15 }
}
}
}
