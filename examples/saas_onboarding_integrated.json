{
  "version": "1.0",
  "metadata": {
    "name": "SaaS Onboarding Journey - Features #1-3 Integration",
    "description": "Comprehensive demo integrating vintage effects, segmentation, and multi-stage processes. Models SaaS user lifecycle with age-based retention decay, segment-based conversion rates, and onboarding funnel progression."
  },
  "timeframe": {
    "start": "2023-01-01T00:00:00Z",
    "end": "2024-12-31T23:59:59Z",
    "freq": "h"
  },
  "constraints": {
    "foreign_keys": [
      {"from": "onboarding_event.account_id", "to": "account.account_id"},
      {"from": "usage_session.account_id", "to": "account.account_id"}
    ]
  },
  "nodes": [
    {
      "id": "account",
      "kind": "entity",
      "pk": "account_id",
      "rows": 500,
      "segment_behavior": {
        "segment_column": "tier",
        "segments": {
          "enterprise": {"base_probability": 0.10},
          "team": {"base_probability": 0.30},
          "individual": {"base_probability": 0.60}
        }
      },
      "vintage_behavior": {
        "created_at_column": "signup_date",
        "age_based_multipliers": {
          "retention_decay": {
            "curve": [1.0, 0.97, 0.94, 0.91, 0.88, 0.86, 0.84, 0.82, 0.80, 0.78, 0.77, 0.76],
            "time_unit": "month",
            "applies_to": "fanout"
          }
        }
      },
      "columns": [
        {
          "name": "account_id",
          "type": "int",
          "generator": {"sequence": {"start": 1000, "step": 1}}
        },
        {
          "name": "company_name",
          "type": "string",
          "generator": {"faker": {"method": "company"}}
        },
        {
          "name": "tier",
          "type": "string",
          "generator": {
            "choice": {
              "choices": ["enterprise", "team", "individual"],
              "weights": [0.10, 0.30, 0.60]
            }
          }
        },
        {
          "name": "signup_date",
          "type": "datetime",
          "generator": {
            "datetime_series": {
              "within": {
                "start": "2023-01-01T00:00:00Z",
                "end": "2024-06-30T23:59:59Z"
              },
              "freq": "h",
              "pattern": {
                "dimension": "dow",
                "weights": [1.2, 1.2, 1.2, 1.2, 1.2, 0.6, 0.4]
              }
            }
          }
        },
        {
          "name": "industry",
          "type": "string",
          "generator": {
            "choice": {
              "choices": ["technology", "finance", "healthcare", "retail", "education"],
              "weights": [0.35, 0.20, 0.15, 0.20, 0.10]
            }
          }
        }
      ]
    },
    {
      "id": "onboarding_event",
      "kind": "fact",
      "pk": "event_id",
      "parents": ["account"],
      "stage_config": {
        "stages": [
          {"stage_name": "account_created", "transition_rate": 1.0},
          {"stage_name": "email_verified", "transition_rate": 0.85},
          {"stage_name": "first_login", "transition_rate": 0.92},
          {"stage_name": "profile_completed", "transition_rate": 0.70},
          {"stage_name": "first_action", "transition_rate": 0.80},
          {"stage_name": "invited_teammate", "transition_rate": 0.45},
          {"stage_name": "activated", "transition_rate": 0.88}
        ],
        "segment_variation": {
          "enterprise": {"transition_multiplier": 1.25},
          "team": {"transition_multiplier": 1.10},
          "individual": {"transition_multiplier": 0.85}
        }
      },
      "columns": [
        {
          "name": "event_id",
          "type": "int",
          "generator": {"sequence": {"start": 1, "step": 1}}
        },
        {
          "name": "account_id",
          "type": "int",
          "generator": {"lookup": {"from": "account.account_id"}}
        },
        {
          "name": "stage_name",
          "type": "string",
          "generator": {"choice": {"choices": ["account_created"]}}
        },
        {
          "name": "stage_index",
          "type": "int",
          "generator": {"sequence": {"start": 0, "step": 1}}
        },
        {
          "name": "event_timestamp",
          "type": "datetime",
          "generator": {
            "datetime_series": {
              "within": {
                "start": "2023-01-01T00:00:00Z",
                "end": "2024-12-31T23:59:59Z"
              },
              "freq": "h"
            }
          }
        },
        {
          "name": "user_agent",
          "type": "string",
          "generator": {"faker": {"method": "user_agent"}}
        }
      ]
    },
    {
      "id": "usage_session",
      "kind": "fact",
      "pk": "session_id",
      "parents": ["account"],
      "fanout": {
        "distribution": "poisson",
        "lambda": 15
      },
      "columns": [
        {
          "name": "session_id",
          "type": "int",
          "generator": {"sequence": {"start": 10000, "step": 1}}
        },
        {
          "name": "account_id",
          "type": "int",
          "generator": {"lookup": {"from": "account.account_id"}}
        },
        {
          "name": "session_start",
          "type": "datetime",
          "generator": {
            "datetime_series": {
              "within": {
                "start": "2023-01-01T00:00:00Z",
                "end": "2024-12-31T23:59:59Z"
              },
              "freq": "h",
              "pattern": {
                "dimension": "hour",
                "weights": [0.3, 0.2, 0.2, 0.2, 0.2, 0.3, 0.5, 0.8, 1.2, 1.5, 1.8, 1.9, 1.8, 1.7, 1.8, 1.9, 1.7, 1.4, 1.0, 0.8, 0.6, 0.5, 0.4, 0.3]
              }
            }
          }
        },
        {
          "name": "duration_minutes",
          "type": "int",
          "generator": {
            "distribution": {
              "type": "lognormal",
              "params": {"mean": 2.5, "sigma": 0.8},
              "clamp": [1, 180]
            }
          }
        },
        {
          "name": "actions_count",
          "type": "int",
          "generator": {
            "distribution": {
              "type": "poisson",
              "params": {"lambda": 8},
              "clamp": [0, 100]
            }
          }
        }
      ]
    }
  ]
}
